import{a as p,a0 as i,j as e,K as k,V as w,W as C,Y as S,Z as T,$ as M,I as b,H as d,a1 as I,X as R,a7 as j,r as h,a2 as m,a3 as u,a6 as V}from"./useMemoizedFn-BCNTvhCO.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=p("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=p("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),B=["rgb(71 85 105)","rgb(87 83 78)","rgb(220 38 38)","rgb(234 88 12)","rgb(217 119 6)","rgb(202 138 4)","rgb(101 163 13)","rgb(22 163 74)","rgb(5 150 105)","rgb(13 148 136)","rgb(8 145 178)","rgb(37 99 235)","rgb(67 56 202)","rgb(124 58 237)","rgb(147 51 234)","rgb(192 38 211)","rgb(219 39 119)","rgb(225 29 72)"],H=({tag:s,updateTag:a,doSave:r})=>{const l=i(n=>{a({...s,color:n})});return e.jsxs("div",{className:"h-7 flex items-center justify-between p-2 gap-2 hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{value:s.title,onChange:n=>a({...s,title:n.target.value}),className:"h-7 py-0 min-w-32 max-w-32",placeholder:"请输入"}),e.jsxs(w,{onValueChange:l,value:s.color,children:[e.jsx(C,{className:"w-32 py-0 h-7 px-1",children:e.jsx(S,{placeholder:"请选择"})}),e.jsx(T,{children:B.map(n=>e.jsx(M,{value:n,children:e.jsx(b,{style:{backgroundColor:n},className:"text-white min-w-10 h-5",variant:"outline",children:s.title})},n))})]})]}),e.jsxs("div",{className:"flex",children:[e.jsx(d,{onClick:()=>r(s),variant:"ghost",className:"flex h-7 w-7 p-0 data-[state=open]:bg-muted",children:e.jsx(I,{})}),e.jsx(d,{onClick:()=>a(null),variant:"ghost",className:"flex h-7 w-7 p-0 data-[state=open]:bg-muted",children:e.jsx(R,{})})]})]})},q=({tag:s,onEdit:a,onDelete:r})=>e.jsxs("div",{className:"h-7 flex items-center justify-between p-2 gap-2 hover:bg-muted/50",children:[e.jsx(b,{style:{backgroundColor:s.color},className:"text-white",variant:"outline",children:s.title}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{onClick:()=>r(s),variant:"ghost",disabled:s.id===j,className:"h-7 w-7",children:e.jsx(E,{})}),e.jsx(d,{disabled:s.id===j,onClick:()=>a(s),variant:"ghost",className:"h-7 w-7",children:e.jsx(D,{})})]})]}),z=({tag:s,currentEditTag:a,onEdit:r,updateTag:l,doSave:n,onDelete:x})=>s.id===(a==null?void 0:a.id)?e.jsx(H,{doSave:n,updateTag:l,tag:a}):e.jsx(q,{onDelete:x,onEdit:r,tag:s}),A=()=>{const[s,a]=h.useState([]),[r,l]=h.useState(null),n=h.useCallback(()=>{m(u.FetchStore).then(t=>{const{data:o}=t,{tags:c}=o;a(c)})},[]);h.useEffect(()=>{n()},[n]);const x=i(t=>{l(t)}),v=i(t=>{const o=s.map(c=>c.id===t.id?t:c);m(u.UpdateTag,o).then(c=>{const{data:g}=c,{tags:N}=g;a(N),l(null)})}),f=i(()=>{const t={title:"",color:"",id:Math.random().toString(16).slice(2)},o=[...s,t];l(t),a(o)}),y=i(t=>{m(u.DeleteTag,t).then(o=>{const{data:c}=o,{tags:g}=c;a(g)})});return e.jsxs("div",{className:"py-2 flex flex-col gap-2",children:[e.jsx("div",{className:"px-2",children:e.jsx(d,{onClick:f,className:"flex h-7 data-[state=open]:bg-muted",children:"新建标签"})}),e.jsx("div",{className:"flex flex-col",children:s.map(t=>e.jsx(z,{updateTag:l,currentEditTag:r,onEdit:x,tag:t,doSave:v,onDelete:y},t.id))})]})};V.createRoot(document.getElementById("root")).render(e.jsx(A,{}));
